<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="stylesheet.css" rel="stylesheet">
    <title>Music</title>
</head>
<body>
    <img id="newPic" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSa_0U7xRFX5M-mnAgCORX-SGXUMnvmxkLbSg&usqp=CAU">
    <div id="disappear">
        <button id="start" onclick="qa()">Explore her discography</button><br>
    </div>
    <div id="maindiv"></div>
    <div id="soundz"></div>
    <button id="playIt">Play it</button><br>
</body>
</html>

<script>
    // picks a random song 
    let randomNum = Math.floor(Math.random() * 50);
    let juke = document.querySelector("#soundz");
    var playButton = document.querySelector("#playIt"); 
    var divLoad = document.querySelector('#maindiv');
    document.getElementById("playIt").style.visibility="hidden"
    var isPlaying = false;


function playit(song) {
        isPlaying = true;
        juke.innerHTML =
        "<audio id = 'myAudio' controls autoplay src=" + song + " type='audio/m4a'></audio>"; 
    }
    playButton.addEventListener('click', function(){
        if (isPlaying = true){
            playit(null);
        }
            playit("https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview116/v4/59/2b/98/592b9888-c00d-98b1-41c8-6f207fa704f1/mzaf_2783580688957198545.plus.aac.p.m4a");
    });
    
    function qa(){
        let juke = document.querySelector("#soundz");
        let content = document.querySelector("#maindiv");
        document.getElementById("disappear").style.visibility="hidden";
        document.getElementById("newPic").style.visibility="visible";
        $.getJSON("https://itunes.apple.com/search?term=the+arianagrande&limit=45",
            function (data) {
                for (i = 0; i < data.results.length; i++) {
                content.innerHTML += 
                    "<div id = songBox> <h6>" + data.results[i].artistName + "</h6>" +
                    "<h6>" + data.results[i].trackName +
                    "</h6><br><button id = 'songButtons' onclick='playit(\"" + data.results[i].previewUrl + "\")'><img id='images' src='" + data.results[i].artworkUrl100 + "'></button><br><br> </div>" ;
                }
                
            }
        );

    }
    
    
</script>